(function(){if($("#loading").size()==0){var loading=$('<div id="loading">'+'<div id="loading-center">'+'<div id="loading-center-absolute">'+'<div class="object" id="object_four"></div>'+'<div class="object" id="object_three"></div>'+'<div class="object" id="object_two"></div>'+'<div class="object" id="object_one"></div>'+"</div>"+"</div>"+"</div>");$("body").prepend(loading)}})();$(function(){function copyToClip(content){var aux=document.createElement("textarea");aux.value=content;document.body.appendChild(aux);aux.select();document.execCommand("copy");document.body.removeChild(aux)}function loadNetBlogId(){var dom=$("script:contains(getFollowStatus)");if(dom.size()==0){throw"getFollowStatus为空值"}return dom.html().replace("getFollowStatus('","").replace("');","")}var recordBlobId;function loadNetBlogIdBack(cback){if(recordBlobId){cback?cback(recordBlobId):""}$.ajax({url:getAjaxBaseUrl()+"news.aspx",type:"get",dataType:"text",success:function(str){if((/<script>(.*?)<\/script>/g).exec(str)!=null){var id=RegExp.$1.replace("getFollowStatus('","").replace("');","");recordBlobId=id;cback?cback(id):""}}})}function loadNetBlogName(){var dom=$("#Header1_HeaderTitle");if(dom.size()==0){throw"Header1_HeaderTitle为空值"}return dom.html()}function isPostDetail(){return $("#post_detail").size()>0}function loadPostTitle(){$("#topics .postTitle a").hide();return $("#topics .postTitle a").html()}function loadPostDesc(){var mainDom=$("#topics .post .postDesc");return"Posted by "+mainDom.find("a:first").html()+" on "+mainDom.find("#post-date").html()}function loadTags(){var tags={};$("#BlogPostCategory a,#EntryTag a").each(function(i,e){var tag=$(e).html();tags[tag.toUpperCase()]=tag});var values=[];for(var key in tags){values.push(tags[key])}return values}function loadDiggitAttr(){var diggit=$("#div_digg .diggit");if(diggit.size()>0){return diggit.attr("onclick")}diggit=$("a[onclick^='AddToWz(']:contains(收藏)");if(diggit.size()>0){var digId=diggit.attr("onclick").split(")")[0].replace("AddToWz(","");return"votePost("+digId+",'Digg')"}throw"diggit为空值"}function showMask(){$(document).bind("mousewheel",function(event,delta){if(($(event.toElement).attr("id")==="main-mask")||($(event.toElement).attr("class")==="optiscroll-vtrack")){return false}});$("#main-mask").css({"height":$(document).height(),"width":$(document).width()});$("#main-mask").show()}function hideMask(){$(document).unbind("mousewheel");$("#main-mask").hide()}$(window).resize(function(){$("#main-mask").css({"height":$(document).height(),"width":$(document).width()})});(function(){var shadeDom=$('<div id="main-mask"></div>');$("body").prepend(shadeDom)})();(function(){var sideBar=document.getElementById("sideBar");$(sideBar).addClass("optiscroll");new Optiscroll(sideBar,{maxTrackSize:50,preventParentScroll:true,wrapContent:false});var sidebarNews=document.getElementById("sidebar_news");var closetTmpDom=$("<a class='iconfont closeBtn'></a>");closetTmpDom.click(function(){hideMask();$(sideBar).css("cssText","width:0px!important;display:block;")});closetTmpDom.click();$(sidebarNews).prepend(closetTmpDom);loadNetBlogIdBack(function(blobid){var focusTmpDom=$('<a href="javascript:void(0)" class="focusMeBtn" onclick="follow(\''+blobid+"')\">+加关注</a>");$(sidebarNews).append(focusTmpDom)});$("body").click(function(e){function closeMenu(){hideMask();closetTmpDom.click()}$(e.target).closest("#sideBar,.main-menu-button,.main-menu-sm-button").size()==0?closeMenu():""});var pageArray=[{name:"首页",url:_static_.indexPage,target:"_self"},{name:"联系",url:_static_.sendPage,target:"_blank"},{name:"订阅",url:_static_.subPage,target:"_blank"},{name:"管理",url:_static_.manPage,target:"_blank"},{name:"GitHub",url:_static_.gitHub,target:"_blank"}];var pageTemDom=$('<div class="menu-icon-list"></div>');var pageUlStr='<ol class="menu-icon-content">';pageArray.forEach(function(e,i){pageUlStr+="<li><a style='cursor:pointer;' href='"+e.url+"' target='"+e.target+"'>"+e.name+"</a></li>"});pageUlStr+="</ol>";var pageUlSignStr='<ol class="menu-icon-index">';pageArray.forEach(function(e,i){pageUlSignStr+="<li></li>"});pageUlSignStr+"</ol>";pageTemDom.html(pageUlStr+pageUlSignStr);$("#blog-sidecolumn").prepend(pageTemDom)})();(function(){function openMenu(){showMask();$("#sideBar").css("cssText","width:252px!important;display:block;")}var headTmpDom=$('<div class="main-header"></div>');headTmpDom.css("background","url("+_static_.backgroundImg+") center center / cover no-repeat rgb(34, 34, 34)");$("#home").before(headTmpDom);var menuTmpDom=$("<button class='iconfont main-menu-button'><span>菜单</span></button>");menuTmpDom.click(openMenu);headTmpDom.append(menuTmpDom);var menuSmTmpDom=$("<button class='iconfont main-menu-sm-button'><span> </span></button>");menuSmTmpDom.hide();menuSmTmpDom.click(openMenu);headTmpDom.append(menuSmTmpDom);var menuLocation=1;function initDefSign(){menuLocation=1;var signTmpDom=$('<div class="main-header-sign"></div>');var signTmpIntStr="";signTmpIntStr+='<h1 class="sign1" >'+loadNetBlogName()+"</h1>";signTmpIntStr+='<h2 class="sign2" style="display: -webkit-box;">'+_static_.poetry.line+"</h2>";signTmpIntStr+='<h3 class="sign3" style="display: block;">'+_static_.poetry.desc+"</h3>";signTmpDom.html(signTmpIntStr);headTmpDom.append(signTmpDom);var arrowTmpDom=$('<div class="main-header-arrow"></div>');var arrowTmpIntStr="";arrowTmpIntStr+='<div class="bottom-arrow-warp"><span class="iconfont bottom-arrow"></span></div>';arrowTmpDom.html(arrowTmpIntStr);arrowTmpDom.find(".bottom-arrow").click(function(){$("html").animate({scrollTop:$(window).height()},450)});headTmpDom.append(arrowTmpDom)}function initPostSign(){menuLocation=0.4;headTmpDom.css("height","40vh");var signTmpDom=$('<div class="main-header-sign"></div>');var signTmpIntStr="";signTmpIntStr+='<h1 class="sign-post-title" >'+loadPostTitle()+"</h1>";signTmpIntStr+='<h2 class="sign-post-desc">'+loadPostDesc()+"</h2>";var tags=loadTags();var tagTmpStr="";tags.forEach(function(e,i){tagTmpStr+='<span class="sign-post-tag">'+e+"</span>"});signTmpIntStr+='<h3 class="sign-post-tags">'+tagTmpStr+"</h2>";signTmpDom.html(signTmpIntStr);headTmpDom.append(signTmpDom)}isPostDetail()?initPostSign():initDefSign();$(window).scroll(function(event){function show(){menuTmpDom.show();menuSmTmpDom.hide()}function hide(){menuTmpDom.hide();menuSmTmpDom.show()}($(document).scrollTop()>=(($(window).height()*menuLocation)-35))?hide():show()});var mainTopDom=$('<div class="main-top-bar-wrap"><div class="main-top-bar"></div></div>');$("#home").before(mainTopDom);$(window).scroll(function(event){var width=($(document).scrollTop()/($(document).height()-$(window).height()))*$(window).width();mainTopDom.find(".main-top-bar").css("width",width+"px")})})();(function(){})();(function(){loadNetBlogIdBack(function(blobId){var rightMenu=$('<div class="right-menu"></div>');var iconHtml="";if(isPostDetail()){iconHtml+='<span class="iconfont icon-zan right-zan" onclick="'+loadDiggitAttr()+'"></span>'}iconHtml+='<span class="iconfont icon-heart right-heart" onclick="follow(\''+blobId+"')\"></span>";iconHtml+='<span class="iconfont icon-downbot right-arrow"></span>';$("#home").before(rightMenu);rightMenu.html(iconHtml);rightMenu.find(".right-arrow").click(function(e){if($(e.currentTarget).hasClass("right-arrow-rotate")){$("html").animate({scrollTop:0},450)}else{$("html").animate({scrollTop:$(document).height()},450)}});$(window).scroll(function(event){if($(document).scrollTop()>=$(window).height()-35){$(".right-arrow").addClass("right-arrow-rotate")}else{$(".right-arrow").removeClass("right-arrow-rotate")}})})})();(function(){if(!isPostDetail()){return}var eof=$('<p class="essaySuffix-eof">__EOF__</p>');$("#MySignature").before(eof);var sign=$(""+'<div class="essaySuffix-box">'+'<div class="essaySuffix-box-left">'+'<a class="lightbox" href="'+_static_.headImg+'">'+'<img src="'+_static_.headImg+'" alt="">'+"</a>"+"</div>"+'<div class="essaySuffix-box-right">'+'<span class="essaySuffix-right-title">作　　者</span>：'+"<strong>"+'<span style="font-size: 12px;">'+'<a href="'+_static_.indexPage+'" target="_blank">cjunn</a>'+"</span>"+"</strong> "+"<br>"+'<span style="font-weight: bold; white-space:nowrap;">出　　处</span>：'+'<a href="'+_static_.indexPage+'" target="_blank">'+_static_.indexPage+"</a>"+"<br>"+'<span class="essaySuffix-right-title">关于博主</span>：'+'热爱生活，爱读书/旅游，乐于专研。评论和私信会在第一时间回复。或者<a href="'+_static_.sendPage+'" target="_blank">直接私信</a>我。'+"<br>"+'<span class="essaySuffix-right-title">版权声明</span>：署名 - 非商业性使用 - 禁止演绎，'+'<a href="'+_static_.copyright1+'" alt="协议普通文本" title="协议普通文本" target="_blank">协议普通文本</a> | '+'<a href="'+_static_.copyright2+'" alt="协议法律文本" title="协议法律文本" target="_blank">协议法律文本</a>。'+"<br>"+'<span class="essaySuffix-right-title">声援博主</span>：如果您觉得文章对您有帮助，可以点击文章右下角'+"<strong>"+'<span style="color: #ff0000; font-size: 12pt;">【'+'<a id="post-up" onclick="'+loadDiggitAttr()+'" href="javascript:void(0);">推荐</a>】'+"</span>"+"</strong>"+"一下。您的鼓励是博主的最大动力！"+"<br>"+"</div>"+'<div style="clear: both;"></div>'+"</div>");$("#MySignature").before(sign)})();(function(){if(!isPostDetail()){return}$(".postBody").attr("data-toc","#toc");$("#mainContent").before('<div id="toc"></div>');var tocHelper=new TocHelper({dom:"div[data-toc]",offsetBody:document.querySelector("#home")});tocHelper.reset();function resetTocLoc(){var mainContentWidth=$("#mainContent").outerWidth();$("#toc").css("left","calc(50% + "+((mainContentWidth/2)+5)+"px)")}resetTocLoc();$(window).resize(resetTocLoc);(function(){var mainTop=$("#main").offset().top;$("#toc").css("cssText",$("#toc").attr("style")+";top:"+mainTop+"px!important;");$(window).scroll(function(event){var winTop=$(window).scrollTop();if(winTop<=mainTop){var winTop=$(window).scrollTop();$("#toc").css("cssText",$("#toc").attr("style")+";top:"+(mainTop-winTop)+"px!important;")}else{$("#toc").css("cssText",$("#toc").attr("style")+";top:5px!important;")}})})()})();(function(){var codes=$("#cnblogs_post_body pre code");codes.append('<span class="hideIcon"> </span>');codes.find(".hideIcon").click(function(e){copyToClip($(e.target).closest("code").text())})})();(function(){function setTitle(i,e){var text=$(e).text();$(e).attr("title",text)}$("#sidebar_recentposts a").each(setTitle);$("#TopViewPostsBlock a").each(setTitle);$("#sidebar_recentcomments a").each(setTitle);$("#sidebar_recentcomments .recent_comment_body").each(setTitle);$("#sidebar_topcommentedposts a").each(setTitle);$("#topdigg_posts_wrap a").each(setTitle)})();setTimeout(function(){$("#loading").fadeOut(500)},50)});